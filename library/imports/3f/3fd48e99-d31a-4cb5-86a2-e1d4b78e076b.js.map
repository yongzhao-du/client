{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "const ControlDefine = require(\"control_define\");\r\nconst ControlKey = ControlDefine.ControlKey;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        background: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        \r\n        stick: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        \r\n        stickMoveRadius: 100,\r\n        \r\n        stickKickbackTime: 0.3,\r\n        \r\n        backgroundLowAlpha: 50,\r\n        \r\n        backgroundHighAlpha: 255,\r\n        \r\n        backgroundFadeTime: 0.2,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {        \r\n        this._movePos = new cc.Vec2();\r\n        this._dirction = new cc.Vec2();\r\n        this.background.opacity = this.backgroundLowAlpha;\r\n        \r\n        this.background.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        this.background.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n        this.background.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n        this.background.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this);\r\n    },\r\n\r\n    setPlayer: function (player) {\r\n        this._playerCtrl = player;\r\n    },\r\n    \r\n    onTouchStart: function (event) {\r\n        this.doStartStaff();\r\n        var location = this.node.convertTouchToNodeSpace(event);\r\n        this.updateStickPosition(location);\r\n    },\r\n    \r\n    onTouchMove: function (event) {\r\n        var location = this.node.convertTouchToNodeSpace(event);\r\n        this.updateStickPosition(location);\r\n    },\r\n\r\n    onTouchEnd: function (event) {\r\n        this.doEndStaff();\r\n    },\r\n\r\n    onTouchCancel: function (event) {\r\n        this.doEndStaff();\r\n    },\r\n    \r\n    updateStickPosition: function (location) {\r\n        var radius = Math.sqrt(Math.pow(location.x, 2)\r\n            + Math.pow(location.y, 2));\r\n        if (radius > this.stickMoveRadius) {\r\n            var scale = this.stickMoveRadius / radius;\r\n            location.x *= scale;\r\n            location.y *= scale;\r\n        }\r\n        \r\n        if ( location.x === 0 && location.y === 0 ) {\r\n            this._dirction.x = 0;\r\n            this._dirction.y = 0;\r\n        } else {\r\n            var r = Math.atan2(location.x, location.y);\r\n            var d = Math.floor(180 - r * 180 / Math.PI) -67.5;\r\n            if (d < 0) d = 360 + d;\r\n            d = Math.floor(d / 45);\r\n        \r\n            switch (d) {\r\n                case 0:\r\n                    this._dirction.x = 1;\r\n                    this._dirction.y = 0;\r\n                    break;\r\n                case 1:\r\n                    this._dirction.x = 1;\r\n                    this._dirction.y = 1;\r\n                    break;\r\n                case 2:\r\n                    this._dirction.x = 0;\r\n                    this._dirction.y = 1;\r\n                    break;\r\n                case 3:\r\n                    this._dirction.x = -1;\r\n                    this._dirction.y = 1;\r\n                    break;\r\n                case 4:\r\n                    this._dirction.x = -1;\r\n                    this._dirction.y = 0;\r\n                    break;\r\n                case 5:\r\n                    this._dirction.x = -1;\r\n                    this._dirction.y = -1;\r\n                    break;\r\n                case 6:\r\n                    this._dirction.x = 0;\r\n                    this._dirction.y = -1;\r\n                    break;\r\n                case 7:\r\n                    this._dirction.x = 1;\r\n                    this._dirction.y = -1;\r\n                    break;\r\n            }\r\n        }\r\n        \r\n        this.stick.x = location.x;\r\n        this.stick.y = location.y;\r\n        \r\n        if (this._playerCtrl) {\r\n            this._dirction.x == 1 ? this._playerCtrl.keyDown(ControlKey.RIGHT) : this._playerCtrl.keyUp(ControlKey.RIGHT);\r\n            this._dirction.x == -1 ? this._playerCtrl.keyDown(ControlKey.LEFT) : this._playerCtrl.keyUp(ControlKey.LEFT);\r\n            this._dirction.y == 1 ? this._playerCtrl.keyDown(ControlKey.UP) : this._playerCtrl.keyUp(ControlKey.UP);\r\n            this._dirction.y == -1 ? this._playerCtrl.keyDown(ControlKey.DOWN) : this._playerCtrl.keyUp(ControlKey.DOWN);\r\n        }\r\n    },\r\n    \r\n    doStartStaff: function () {\r\n        this.stick.stopAllActions();\r\n        this.background.stopAllActions();\r\n        var time = (this.backgroundHighAlpha - this.background.opacity)\r\n            / (this.backgroundHighAlpha - this.backgroundLowAlpha)\r\n            * this.backgroundFadeTime; \r\n        var action = new cc.FadeTo(time, this.backgroundHighAlpha);\r\n        this.background.runAction(action);\r\n    },\r\n    \r\n    doEndStaff: function () {\r\n        this.background.stopAllActions()\r\n        var time = (this.background.opacity - this.backgroundLowAlpha)\r\n            / (this.backgroundHighAlpha - this.backgroundLowAlpha)\r\n            * this.backgroundFadeTime;\r\n        var action = new cc.FadeTo(time, this.backgroundLowAlpha);\r\n        this.background.runAction(action);\r\n        \r\n        action = new cc.MoveTo(this.stickKickbackTime, 0, 0);\r\n        action.easing(new cc.easeBackOut());\r\n        this.stick.runAction(action);\r\n        \r\n        this._dirction.x = 0;\r\n        this._dirction.y = 0;\r\n        \r\n        if (this._playerCtrl) {\r\n            this._playerCtrl.keyUp(ControlKey.RIGHT);\r\n            this._playerCtrl.keyUp(ControlKey.LEFT);\r\n            this._playerCtrl.keyUp(ControlKey.UP);\r\n            this._playerCtrl.keyUp(ControlKey.DOWN);\r\n        }\r\n    },\r\n    \r\n    getDirection: function () {\r\n        return this._dirction;\r\n    },\r\n    \r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n        \r\n    // },\r\n});\r\n"
  ]
}