{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var ActorDefine = require(\"actor_define\");\r\nvar Actor = require(\"actor_ctrl\");\r\n\r\nvar ActorAction = ActorDefine.ActorAction;\r\nvar ActorDirection = ActorDefine.ActorDirection;\r\nvar ActionCompleteType = ActorDefine.ActionCompleteType;\r\n\r\ncc.Class({\r\n    extends: Actor,\r\n\r\n    onLoad: function () {\r\n        this._AIMoveEndTime = 0;\r\n        this._AIHoldEndTime = 0;\r\n        this._AIAttackDelayEndTime = 0;\r\n        this._AIRunned = false;\r\n        this._super();\r\n    },\r\n\r\n    reset: function () {\r\n        this._AIMoveEndTime = 0;\r\n        this._AIHoldEndTime = 0;\r\n        this._AIAttackDelayEndTime = 0;\r\n        this._AIRunned = false;\r\n        this._super();\r\n    },\r\n    \r\n    run: function () {\r\n        this._AIRunned = true;\r\n    },\r\n    \r\n    stop: function () {\r\n        this._AIRunned = false;\r\n    },\r\n\r\n    update: function (dt) {\r\n\r\n        this._super(dt);\r\n    },\r\n\r\n    nextAction: function () {\r\n        if (this._isDead)\r\n            return;\r\n        \r\n        if (this._currAction == ActorAction.BORN) {\r\n            this.run();\r\n        }\r\n\r\n        if (!this._AIRunned && this._bornEndTime <= 0) {\r\n            this._super();\r\n            return;\r\n        }\r\n        \r\n        if (this._AIRunned && this._bornEndTime <= 0) {\r\n            var player = this._logicManager.getPlayer();\r\n            if (player.isDead()) {\r\n                this.stopMove();\r\n                this._super();\r\n                return;\r\n            }\r\n\r\n            var disX = player.node.x - this.node.x;\r\n            var disY = player.node.y - this.node.y\r\n            var dirX = ActorDirection.LEFT;\r\n            var dirY = 0;\r\n            if (disX > 0)\r\n                dirX = ActorDirection.RIGHT;\r\n            if (Math.abs(disY) > 10) {\r\n                if (disY > 0)\r\n                    dirY = 1;\r\n                else\r\n                    dirY = -1;\r\n            } else {\r\n                dirY = 0;\r\n            }\r\n                \r\n            this.setDirection(dirX);\r\n            \r\n            var currTime = Global.syncTimer.getTimer();\r\n            if (Math.abs(disY) < 20 && Math.abs(disX) < 60 ) {\r\n                if (currTime >= this._AIAttackDelayEndTime) {\r\n                    var skill = Global.skillProvider.getConfig(1);\r\n                    if (!skill) {\r\n                        //this._super();\r\n                        return;\r\n                    }\r\n                    this.stopMove();\r\n                    this._AIAttackDelayEndTime = currTime + 5;\r\n                    var postureList = [ skill.postures[0] ];\r\n                    this.startAttack(postureList, 1, this._direction);\r\n                } else {\r\n                    this._super();\r\n                }\r\n            } else if (this._AIMoveEndTime > 0) {\r\n                if (currTime <= this._AIMoveEndTime) {\r\n                    var speed = new cc.Vec2(100 * dirX, 100 * dirY);\r\n                    if (this._moveStartTime <= 0 || speed.x !== this._currMoveSpeed.x || speed.y !== this._currMoveSpeed.y ) {\r\n                        this.startMove(speed.x, speed.y, false);\r\n                    } else {\r\n                        this._super();\r\n                    }\r\n                } else {\r\n                    this._AIMoveEndTime = 0;\r\n                    this.stopMove();\r\n                    this._super();\r\n                    this._AIHoldEndTime = currTime + Math.random() * 2 + 1;\r\n                }\r\n            } else if (this._AIHoldEndTime > 0) {\r\n                if (currTime >= this._AIHoldEndTime) {\r\n                    this._AIHoldEndTime = 0;\r\n                }\r\n            }  else {\r\n                this._AIMoveEndTime = currTime + Math.random() * 2 + 2;\r\n            }\r\n        }\r\n    },\r\n});\r\n"
  ]
}