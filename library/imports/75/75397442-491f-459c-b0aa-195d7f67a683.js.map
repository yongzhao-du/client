{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "const STATE_DEFAULT         = -1;\r\nconst STATE_CHECK_UPDATE    = 0;\r\nconst STATE_UPDATING        = 1;\r\nconst STATE_LOAD_ASSETS     = 2;\r\nconst STATE_INIT_GAME       = 3;\r\nconst STATE_ENTER_GAME      = 4;\r\nconst STATE_DONE            = 5;\r\n\r\nconst LoadingStateInfo = [\r\n    {\r\n        start: 0,\r\n        end: 0.02,\r\n        lang: 'checking_update',\r\n    },\r\n    {\r\n        start: 0.02,\r\n        end: 0.05,\r\n        lang: 'updating_assets',\r\n    },\r\n    {\r\n        start: 0.05,\r\n        end: 0.9,\r\n        lang: 'loading_assets',\r\n    },\r\n    {\r\n        start: 0.9,\r\n        end: 1,\r\n        lang: 'initting_game',\r\n    },\r\n    {\r\n        start: 1,\r\n        end: 1,\r\n        lang: 'entering_game',\r\n    }\r\n]\r\n\r\nconst PanelType = {\r\n    NONE: 0,\r\n    CONFIRM: 1,\r\n    START_UPDATE: 2,\r\n    RETRY_UPDATE: 3,\r\n}\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        \r\n        remoteAssetPath: 'remote_assset',\r\n        \r\n        localManifest: {\r\n            default: null,\r\n            url: cc.RawAsset\r\n        },\r\n        \r\n        updatePanel: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        \r\n        updateMessage: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        \r\n        updateProgress: {\r\n            default: null,\r\n            type: cc.ProgressBar\r\n        },\r\n        \r\n        updateConfirmButton: {\r\n            default: null,\r\n            type: cc.Button\r\n        },\r\n        \r\n        updateConfirmLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        \r\n        updateCancelButton: {\r\n            default: null,\r\n            type: cc.Button\r\n        },\r\n        \r\n        updateCancelLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n\r\n        loadingMessage: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        \r\n        loadingPercent: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        \r\n        loadingProgress: {\r\n            default: null,\r\n            type: cc.ProgressBar\r\n        },\r\n        \r\n        loadingParticle: {\r\n            default: null,\r\n            type: cc.ParticleSystem\r\n        },\r\n        \r\n        loadAssetTime: 2,\r\n        enterGameTime: 1,\r\n    },\r\n\r\n    onLoad: function () {\r\n        this._state = STATE_DEFAULT;\r\n        this._needUpdate = false;\r\n        this._needRetry = false;\r\n        this._loadAssetStartTime = 0;\r\n        this.loadingPercent.string = '';\r\n        this.loadingMessage.string = '';\r\n        this.loadingParticle.node.x = -249.5;\r\n        this.showUpdatePanel(PanelType.NONE);\r\n        \r\n    },\r\n    \r\n    onDestroy: function () {\r\n        this.removeCheckListener();\r\n        this.removeUpdateListener();\r\n        if (this._am) {\r\n            this._am.release();\r\n            this._am = null;\r\n        }\r\n    },\r\n    \r\n    removeCheckListener: function () {\r\n        if (this._checkListener) {\r\n            cc.eventManager.removeListener(this._checkListener);\r\n            this._checkListener = null;\r\n        }\r\n    },\r\n    \r\n    removeUpdateListener: function () {\r\n        if (this._updateListener) {\r\n            cc.eventManager.removeListener(this._updateListener);\r\n            this._updateListener = null;\r\n        }\r\n    },\r\n    \r\n    start: function () {\r\n        // 只有原生代码需要用热更新功能\r\n        //this.setState(cc.sys.isNative ? STATE_CHECK_UPDATE : STATE_LOAD_ASSETS);\r\n        this.setState(STATE_LOAD_ASSETS);\r\n    },\r\n    \r\n    setState: function (state) {\r\n        if (this._state == state)\r\n            return;\r\n        this._state = state;\r\n        if (state != STATE_DEFAULT && state != STATE_DONE) {\r\n            this.setLoadingPercent(LoadingStateInfo[state].start);\r\n            this.loadingMessage.string = GameLang.t(LoadingStateInfo[state].lang);\r\n        }\r\n        switch (state) {\r\n            case STATE_CHECK_UPDATE:\r\n                this.checkUpdate();\r\n                break;\r\n            case STATE_UPDATING:\r\n                break;\r\n            case STATE_LOAD_ASSETS:\r\n                this.startLoadAssets();\r\n                break;\r\n            case STATE_INIT_GAME:\r\n                this.initGame();\r\n                break;\r\n            case STATE_ENTER_GAME:\r\n                this.startEnterGame();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n    \r\n    setUpdatePercent: function (percent) {\r\n        if (percent < 0) percent = 0;\r\n        else if (percent > 1) percent = 1;\r\n        this.updateMessage.string = GameLang.t('update_percent') + Math.ceil(percent * 100).toString() + \"%\";\r\n        this.updateProgress.progress = percent;\r\n    },\r\n    \r\n    setLoadingPercent: function (percent) {\r\n        if (percent < 0) percent = 0;\r\n        else if (percent > 1) percent = 1;\r\n        this.loadingPercent.string = Math.ceil(percent * 100).toString()  + \"%\"\r\n        this.loadingProgress.progress = percent;\r\n        this.loadingParticle.node.x = percent * 499 - 249.5;\r\n    },\r\n    \r\n    checkCb: function (event) {\r\n        cc.log('Code: ' + event.getEventCode());\r\n        \r\n        var needRemove = true;\r\n        switch (event.getEventCode()) {\r\n            case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:\r\n                cc.log(\"No local manifest file found, hot update skipped.\");\r\n                this.setState(STATE_LOAD_ASSETS);\r\n                break;\r\n            case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:\r\n            case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:\r\n                cc.log(\"Fail to download manifest file, hot update skipped.\");\r\n                this.setState(STATE_LOAD_ASSETS);\r\n                break;\r\n            case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:\r\n                cc.log(\"Already up to date with the latest remote version.\");\r\n                this.setState(STATE_LOAD_ASSETS);\r\n                break;\r\n            case jsb.EventAssetsManager.NEW_VERSION_FOUND:\r\n                this._needUpdate = true;\r\n                this.showUpdatePanel(PanelType.CONFIRM);\r\n                break;\r\n            default:\r\n                needRemove = false;\r\n                break;\r\n        }\r\n        \r\n        if (needRemove)\r\n            this.removeCheckListener();\r\n    },\r\n    \r\n    updateCb: function (event) {\r\n        var needRestart = false;\r\n        var failed = false;\r\n        switch (event.getEventCode())\r\n        {\r\n            case jsb.EventAssetsManager.UPDATE_PROGRESSION:\r\n                var percent = event.getPercent();\r\n                var percentByFile = event.getPercentByFile();\r\n                var msg = event.getMessage();\r\n                if (msg) cc.log(msg);\r\n                cc.log(percent.toFixed(2) + '%');\r\n                this.setUpdatePercent(percent);\r\n                break;\r\n                \r\n            case jsb.EventAssetsManager.UPDATE_FINISHED:\r\n                cc.log('Update finished. ' + event.getMessage());\r\n                needRestart = true;\r\n                break;\r\n                \r\n            case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:\r\n                cc.log('No local manifest file found, hot update skipped.');\r\n                failed = true;\r\n                break;\r\n                \r\n            case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:\r\n            case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:\r\n                cc.log('Fail to download manifest file, hot update skipped.');\r\n                failed = true;\r\n                break;\r\n                \r\n            case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:\r\n                cc.log('Already up to date with the latest remote version.');\r\n                failed = true;\r\n                break;\r\n            \r\n            case jsb.EventAssetsManager.UPDATE_FAILED:\r\n                cc.log('Update failed. ' + event.getMessage());\r\n                failed = true;\r\n                break;\r\n            case jsb.EventAssetsManager.ERROR_UPDATING:\r\n                cc.log('Asset update error: ' + event.getAssetId() + ', ' + event.getMessage());\r\n                failed = true;\r\n                break;\r\n            case jsb.EventAssetsManager.ERROR_DECOMPRESS:\r\n                failed = true;\r\n                cc.log(event.getMessage());\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (failed) {\r\n            this.removeUpdateListener();\r\n            this._needRetry = true;\r\n            this.showUpdatePanel(PanelType.RETRY_UPDATE);\r\n        }\r\n\r\n        if (needRestart) {\r\n            this.removeUpdateListener();\r\n            var searchPaths = jsb.fileUtils.getSearchPaths();\r\n            var newPaths = this._am.getLocalManifest().getSearchPaths();\r\n            Array.prototype.unshift(searchPaths, newPaths);\r\n            //cc.sys.localStorage.setItem('HotUpdateSearchPaths', JSON.stringify(searchPaths));\r\n            jsb.fileUtils.setSearchPaths(searchPaths);\r\n            cc.game.restart();\r\n        }\r\n    },\r\n    \r\n    checkUpdate: function () {\r\n        var storagePath = ((jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + this.remoteAssetPath);\r\n        cc.log('Storage path for remote asset : ' + storagePath);\r\n\r\n        if (!this._am) {\r\n            this._am = new jsb.AssetsManager(this.localManifest, storagePath);\r\n            this._am.retain();\r\n        }\r\n\r\n        this._needUpdate = false;\r\n        if (this._am.getLocalManifest().isLoaded())\r\n        {\r\n            if (!this._checkListener) {\r\n                this._checkListener = new jsb.EventListenerAssetsManager(this._am, this.checkCb.bind(this));\r\n                cc.eventManager.addListener(this._checkListener, 1);\r\n            }\r\n            this._am.checkUpdate();\r\n        }\r\n    },\r\n    \r\n    startLoadAssets: function () {\r\n        this._loadAssetStartTime = Global.syncTimer.getTimer();\r\n    },\r\n    \r\n    startEnterGame: function () {\r\n        this._enterGameEndTime = Global.syncTimer.getTimer() + this.enterGameTime;\r\n    },\r\n    \r\n    initGame: function () {\r\n        require('init_config').exec();\r\n        require('init_module').exec();\r\n    },\r\n    \r\n    enterGame: function () {\r\n        GameUtil.loadScene(\"login\");\r\n    },\r\n    \r\n    showUpdatePanel: function (type) {\r\n        if (type == PanelType.NONE) {\r\n            this.updatePanel.active = false;\r\n            return;\r\n        }\r\n        switch (type) {\r\n            case PanelType.CONFIRM:\r\n                this.updateConfirmButton.active = true;\r\n                this.updateCancelButton.active = true;\r\n                this.updateProgress.active = false;\r\n                this.updateConfirmLabel.string = GameLang.t('start_update');\r\n                this.updateCancelLabel.string = GameLang.t('exit_game');\r\n                this.updateMessage.string = GameLang.t('confirm_update');\r\n                break;\r\n            case PanelType.START_UPDATE:\r\n                this.updateConfirmButton.active = false;\r\n                this.updateCancelButton.active = false;\r\n                this.updateProgress.active = true;\r\n                this.setUpdatePercent(0);\r\n                break;\r\n            case PanelType.RETRY_UPDATE:\r\n                this.updateConfirmButton.active = true;\r\n                this.updateCancelButton.active = true;\r\n                this.updateProgress.active = false;\r\n                this.updateConfirmLabel.string = GameLang.t('retry_update');\r\n                this.updateCancelLabel.string = GameLang.t('exit_game');\r\n                this.updateMessage.string = GameLang.t('fail_update');\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.updatePanel.active = true;\r\n    },\r\n    \r\n    doUpdate: function () {\r\n        if (!this._am)\r\n            return;\r\n        if (!this._updateListener) {\r\n            this._updateListener = new jsb.EventListenerAssetsManager(this._am, this.updateCb.bind(this));\r\n            cc.eventManager.addListener(this._updateListener, 1);\r\n        }\r\n        this.setState(STATE_UPDATING);\r\n        this._am.update();\r\n    },\r\n    \r\n    onConfirmClick: function () {\r\n        if (this._needRetry || this._needUpdate) {\r\n            this.showUpdatePanel(PanelType.START_UPDATE);\r\n            this.doUpdate();\r\n        }\r\n    },\r\n    \r\n    onCancelClick: function () {\r\n        cc.director.end();\r\n    },\r\n    \r\n    update: function (dt) {\r\n        switch (this._state) {\r\n            case STATE_LOAD_ASSETS:\r\n                var timeElapased = Global.syncTimer.getTimer() - this._loadAssetStartTime;\r\n                if (timeElapased > this.loadAssetTime) {\r\n                    this._loadAssetStartTime = 0;\r\n                    this.setState(STATE_INIT_GAME);\r\n                    return;\r\n                }\r\n                var loadInfo = LoadingStateInfo[STATE_LOAD_ASSETS];\r\n                var assetLoadPercent = timeElapased / this.loadAssetTime;\r\n                var totalLoadPercent = (loadInfo.end - loadInfo.start) * assetLoadPercent + loadInfo.start;\r\n                this.setLoadingPercent(totalLoadPercent);\r\n                break;\r\n            case STATE_INIT_GAME:\r\n                this.setState(STATE_ENTER_GAME);\r\n                break;\r\n            case STATE_ENTER_GAME:\r\n                if (Global.syncTimer.getTimer() >= this._enterGameEndTime) {\r\n                    this._enterGameEndTime = 0;\r\n                    this.enterGame();\r\n                    this.setState(STATE_DONE);\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n});\r\n"
  ]
}